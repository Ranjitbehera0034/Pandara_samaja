<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Admin | Nikhila Odisha Pandara Samaja</title>
    <link rel="stylesheet" href="assets/css/admin.css">
    <link rel="stylesheet" href="assets/css/matrimony.css">
    <link rel="stylesheet" href="assets/css/main.css?v=2.1">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LE9R5DCCNT"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'G-LE9R5DCCNT');
    </script>
    <script src="assets/js/analytics.js" defer></script>
</head>

<body>
    <header>
        <nav class="navbar">
            <div class="brand">
                <img src="assets/img/pandara logo.png" alt="Pandara Samaja Logo" />
                <span>‡¨®‡¨ø‡¨ñ‡¨ø‡¨≥ ‡¨ì‡¨°‡¨ø‡¨∂‡¨æ ‡¨™‡¨®‡≠ç‡¨¶‡¨∞‡¨æ ‡¨∏‡¨Æ‡¨æ‡¨ú</span>
            </div>
            <button class="nav-toggle" aria-label="Toggle navigation">
                <span class="hamburger"></span>
            </button>
            <ul class="nav-links" id="navLinks">
                <li>
                    <a href="index.html">Home</a>
                </li>
                <li>
                    <a href="about.html">About</a>
                </li>
                <li>
                    <a href="members.html">Members</a>
                </li>
                <li>
                    <a href="matrimony.html">Matrimony</a>
                </li>
                <li>
                    <a href="blogs.html">Recent Blogs</a>
                </li>
                <li>
                    <a href="admin.html" class="active">Admin</a>
                </li>
            </ul>
        </nav>
    </header>
    <section class="ticker" aria-label="Pandara Samaja scrolling title">
        <div class="ticker__track">
            <div class="ticker__item">
                ‡¨®‡¨ø‡¨ñ‡¨ø‡¨≥ ‡¨ì‡¨°‡¨ø‡¨∂‡¨æ ‡¨™‡¨®‡≠ç‡¨¶‡¨∞‡¨æ ‡¨∏‡¨Æ‡¨æ‡¨ú ‚Ä¢ Nikhila Odisha Pandara Samaja ‚Ä¢
                ‡¨®‡¨ø‡¨ñ‡¨ø‡¨≥ ‡¨ì‡¨°‡¨ø‡¨∂‡¨æ ‡¨™‡¨®‡≠ç‡¨¶‡¨∞‡¨æ ‡¨∏‡¨Æ‡¨æ‡¨ú ‚Ä¢ Nikhila Odisha Pandara Samaja ‚Ä¢
                ‡¨®‡¨ø‡¨ñ‡¨ø‡¨≥ ‡¨ì‡¨°‡¨ø‡¨∂‡¨æ ‡¨™‡¨®‡≠ç‡¨¶‡¨∞‡¨æ ‡¨∏‡¨Æ‡¨æ‡¨ú ‚Ä¢ Nikhila Odisha Pandara Samaja ‚Ä¢
            </div>
            <!-- duplicate for seamless loop -->
            <div class="ticker__item" aria-hidden="true">
                ‡¨®‡¨ø‡¨ñ‡¨ø‡¨≥ ‡¨ì‡¨°‡¨ø‡¨∂‡¨æ ‡¨™‡¨®‡≠ç‡¨¶‡¨∞‡¨æ ‡¨∏‡¨Æ‡¨æ‡¨ú ‚Ä¢ Nikhila Odisha Pandara Samaja ‚Ä¢
                ‡¨®‡¨ø‡¨ñ‡¨ø‡¨≥ ‡¨ì‡¨°‡¨ø‡¨∂‡¨æ ‡¨™‡¨®‡≠ç‡¨¶‡¨∞‡¨æ ‡¨∏‡¨Æ‡¨æ‡¨ú ‚Ä¢ Nikhila Odisha Pandara Samaja ‚Ä¢
                ‡¨®‡¨ø‡¨ñ‡¨ø‡¨≥ ‡¨ì‡¨°‡¨ø‡¨∂‡¨æ ‡¨™‡¨®‡≠ç‡¨¶‡¨∞‡¨æ ‡¨∏‡¨Æ‡¨æ‡¨ú ‚Ä¢ Nikhila Odisha Pandara Samaja ‚Ä¢
            </div>
        </div>
    </section>
    <main class="admin-container">
        <div id="admin-login" class="auth-card">
            <h2>Admin Login</h2>
            <form id="adminLoginForm">
                <input type="text" id="loginUser" placeholder="Username" required>
                <input type="password" id="loginPass" placeholder="Password" required>
                <button class="btn primary" type="submit" style="width:100%;">Login</button>
            </form>
        </div>

        <div id="admin-panel" class="panel-card" style="display:none;">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h1 class="page-title">Admin Dashboard</h1>
                <button id="adminLogoutBtn" class="btn" style="background: #dc3545; color: white;">Logout</button>
            </div>

            <div class="section-tabs" role="tablist" aria-label="Admin sections">
                <button class="tab" id="tab-matrimony" role="tab" aria-controls="matrimonySection" aria-selected="true"
                    onclick="setActiveSection('matrimonySection', this)">Matrimony Candidate Management</button>
                <button class="tab" id="tab-members" role="tab" aria-controls="memberSection" aria-selected="false"
                    onclick="setActiveSection('memberSection', this)">Member Management</button>
                <button class="tab" id="tab-reviews" role="tab" aria-controls="reviewSection" aria-selected="false"
                    onclick="setActiveSection('reviewSection', this)">üìã Review Submissions</button>
                <button class="tab" id="tab-posts" role="tab" aria-controls="postSection" aria-selected="false"
                    onclick="setActiveSection('postSection', this)">Post Management</button>
            </div>

            <!-- ========= MATRIMONY SECTION ========= -->
            <section id="matrimonySection" class="admin-section panel-card">
                <h3 class="section-title">Matrimony Candidate Management</h3>

                <!-- Search & Actions Bar -->
                <div class="search-container" style="margin-bottom: 2rem;">
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
                        <input type="text" id="candidateSearchInput" placeholder="Search by Name"
                            style="flex: 1; min-width: 250px; padding: 12px 16px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 15px;">
                        <button onclick="searchCandidates()" class="btn primary"
                            style="padding: 12px 24px; white-space: nowrap;">
                            üîç Search
                        </button>
                        <button onclick="clearCandidateSearch()" class="btn ghost"
                            style="padding: 12px 24px; white-space: nowrap;">
                            Clear
                        </button>
                    </div>
                </div>

                <div class="form-grid">

                    <!-- Candidate Form (Left Side) -->
                    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px; border: 1px solid #e9ecef;">
                        <h4 id="candidateFormTitle" style="margin-top: 0; color: #0a4a96;">Add New Candidate</h4>
                        <form id="addCandidateForm" enctype="multipart/form-data">
                            <input type="hidden" id="candidateId">

                            <div class="form-group">
                                <label style="font-weight: 600; font-size: 0.9rem;">Name</label>
                                <input type="text" id="adminName" placeholder="Full Name" required class="form-control">
                            </div>

                            <div class="form-group">
                                <label style="font-weight: 600; font-size: 0.9rem;">Gender</label>
                                <select id="adminGender" required class="form-control">
                                    <option value="">Select Gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label style="font-weight: 600; font-size: 0.9rem;">Marriage Form (Image)</label>
                                <input type="file" id="adminPhotoFile" accept="image/*"
                                    style="border: 2px dashed #ccc; padding: 10px; width: 100%; background: #fff; border-radius: 8px;">
                                <small style="display:block; color: #666; margin-top: 5px;">Leave empty to keep existing
                                    photo when updating.</small>
                            </div>

                            <div style="display: flex; gap: 10px; margin-top: 1rem;">
                                <button type="submit" class="btn primary" style="flex: 1;">Save Candidate</button>
                                <button type="button" id="cancelCandidateEdit" class="btn ghost" style="display:none;"
                                    onclick="resetCandidateForm()">Cancel</button>
                            </div>
                        </form>
                    </div>

                    <!-- Candidate List (Right Side) -->
                    <div id="adminCandidatesList" style="overflow-x: auto;">
                        <table id="candidatesTable"
                            style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                            <thead style="background: #e7eef6; color: #333;">
                                <tr>
                                    <th style="padding: 12px; text-align: left;">Name</th>
                                    <th style="padding: 12px; text-align: left;">Gender</th>
                                    <th style="padding: 12px; text-align: right;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="candidatesTableBody">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>


            <!-- ========= MEMBER MANAGEMENT SECTION ========= -->
            <section id="memberSection" class="admin-section" style="display:none;">
                <h3 class="section-title">Member Management</h3>

                <!-- Search Bar -->
                <div class="search-container" style="margin-bottom: 2rem;">
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center; margin-bottom: 1rem;">
                        <input type="text" id="memberSearchInput"
                            placeholder="Search by Membership No., Name, or Mobile"
                            style="flex: 1; min-width: 250px; padding: 12px 16px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 15px; transition: all 0.3s;">
                        <button onclick="searchMembers()" class="btn primary"
                            style="padding: 12px 24px; white-space: nowrap;">
                            üîç Search
                        </button>
                        <button onclick="clearSearch()" class="btn ghost"
                            style="padding: 12px 24px; white-space: nowrap;">
                            Clear
                        </button>
                        <button onclick="showAddMemberModal()" class="btn"
                            style="padding: 12px 24px; background: #28a745; color: white; white-space: nowrap;">
                            ‚ûï Add Member
                        </button>
                        <button onclick="showBulkUpload()" class="btn"
                            style="padding: 12px 24px; background: #17a2b8; color: white; white-space: nowrap;">
                            üìä Bulk Upload
                        </button>
                    </div>

                    <!-- Filters & Export -->
                    <div
                        style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center; background: #f8f9fa; padding: 1rem; border-radius: 8px; border: 1px solid #e9ecef;">
                        <select id="filterDistrict"
                            style="padding: 10px; border-radius: 6px; border: 1px solid #ced4da; min-width: 150px;">
                            <option value="">All Districts</option>
                        </select>
                        <select id="filterTaluka"
                            style="padding: 10px; border-radius: 6px; border: 1px solid #ced4da; min-width: 150px;"
                            disabled>
                            <option value="">All Talukas</option>
                        </select>
                        <select id="filterPanchayat"
                            style="padding: 10px; border-radius: 6px; border: 1px solid #ced4da; min-width: 150px;"
                            disabled>
                            <option value="">All Panchayats</option>
                        </select>

                        <div style="margin-left: auto; display: flex; gap: 10px;">
                            <button onclick="exportMembers()" class="btn"
                                style="background: #218838; color: white; padding: 10px 20px;">
                                üì• Export
                            </button>
                            <button onclick="printMembers()" class="btn"
                                style="background: #6c757d; color: white; padding: 10px 20px;">
                                üñ®Ô∏è Print
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Members Table -->
                <div id="membersTableContainer"
                    style="overflow-x: auto; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <table id="membersTable" style="width: 100%; border-collapse: collapse;">
                        <thead style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                            <tr>
                                <th style="padding: 16px; text-align: left; font-weight: 600;">Membership No.</th>
                                <th style="padding: 16px; text-align: left; font-weight: 600;">Name</th>
                                <th style="padding: 16px; text-align: left; font-weight: 600;">Mobile</th>
                                <th style="padding: 16px; text-align: left; font-weight: 600;">District</th>
                                <th style="padding: 16px; text-align: left; font-weight: 600;">Taluka</th>
                                <th style="padding: 16px; text-align: left; font-weight: 600;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="membersTableBody">
                            <tr>
                                <td colspan="7" style="padding: 40px; text-align: center; color: #999;">
                                    Loading members...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div id="membersPagination"
                    style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 2rem; flex-wrap: wrap;">
                </div>

                <!-- Bulk Upload Modal/Section -->
                <div id="bulkUploadModal" class="modal" style="display: none;">
                    <div class="modal-content"
                        style="max-width: 600px; background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h3 style="margin: 0;">Bulk Upload Members</h3>
                            <button onclick="closeBulkUpload()"
                                style="background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">&times;</button>
                        </div>
                        <p style="color: #666; margin-bottom: 1.5rem;">Upload an Excel file (.xlsx) with member data</p>
                        <input type="file" id="excelFileInput" accept=".xlsx,.xls"
                            style="margin-bottom: 1rem; width: 100%; padding: 10px; border: 2px dashed #ddd; border-radius: 8px;" />
                        <button id="uploadExcelBtn" class="btn primary" style="width: 100%; padding: 12px;">Start
                            Upload</button>
                        <div id="excelStatus" class="status" style="margin-top: 1rem;"></div>
                        <div id="excelLoader" class="loader" hidden></div>
                    </div>
                </div>

                <!-- Add/Edit Member Modal -->
                <div id="memberModal" class="modal" style="display: none;">
                    <div class="modal-content"
                        style="max-width: 900px; max-height: 90vh; overflow-y: auto; background: white; padding: 2.5rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; position: sticky; top: 0; background: white; padding-bottom: 0.5rem; border-bottom: 2px solid #e9ecef; z-index: 1;">
                            <h3 id="memberModalTitle" style="margin: 0;">Add New Member</h3>
                            <button onclick="closeMemberModal()"
                                style="background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">&times;</button>
                        </div>
                        <form id="memberForm">
                            <input type="hidden" id="memberId">

                            <!-- Section: Basic Info -->
                            <div
                                style="background: #f0f4ff; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 1.2rem; border-left: 4px solid #667eea;">
                                <h4 style="margin: 0 0 1rem 0; color: #0a4a96; font-size: 0.95rem;">üë§ Head of Family
                                    Details</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <div style="grid-column: 1 / -1;">
                                        <label
                                            style="display: block; margin-bottom: 0.4rem; font-weight: 600; color: #333; font-size: 0.85rem;">Membership
                                            No. *</label>
                                        <input type="text" id="membershipNo" required
                                            style="width: 100%; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 0.4rem; font-weight: 600; color: #333; font-size: 0.85rem;">Head
                                            of Family Name *</label>
                                        <input type="text" id="memberName" required
                                            style="width: 100%; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 0.4rem; font-weight: 600; color: #333; font-size: 0.85rem;">Mobile
                                            *</label>
                                        <input type="tel" id="memberMobile" required pattern="[0-9]{10}"
                                            style="width: 100%; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 0.4rem; font-weight: 600; color: #333; font-size: 0.85rem;">Aadhaar
                                            No.</label>
                                        <input type="text" id="memberAadhaar" maxlength="12" pattern="[0-9]{12}"
                                            placeholder="12-digit Aadhaar number"
                                            style="width: 100%; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                    </div>
                                </div>
                            </div>

                            <!-- Section: Address -->
                            <div
                                style="background: #f0faf0; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 1.2rem; border-left: 4px solid #38ef7d;">
                                <h4 style="margin: 0 0 1rem 0; color: #1a7a3a; font-size: 0.95rem;">üìç Address Details
                                </h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 0.4rem; font-weight: 600; color: #333; font-size: 0.85rem;">District
                                            *</label>
                                        <input type="text" id="memberDistrict" required
                                            style="width: 100%; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 0.4rem; font-weight: 600; color: #333; font-size: 0.85rem;">Taluka
                                            *</label>
                                        <input type="text" id="memberTaluka" required
                                            style="width: 100%; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 0.4rem; font-weight: 600; color: #333; font-size: 0.85rem;">Panchayat</label>
                                        <input type="text" id="memberPanchayat"
                                            style="width: 100%; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                    </div>
                                    <div>
                                        <label
                                            style="display: block; margin-bottom: 0.4rem; font-weight: 600; color: #333; font-size: 0.85rem;">Village</label>
                                        <input type="text" id="memberVillage"
                                            style="width: 100%; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px;">
                                    </div>
                                    <div style="grid-column: 1 / -1;">
                                        <label
                                            style="display: block; margin-bottom: 0.4rem; font-weight: 600; color: #333; font-size: 0.85rem;">Full
                                            Address</label>
                                        <textarea id="memberAddress" rows="2"
                                            placeholder="House/Street details (optional)"
                                            style="width: 100%; padding: 10px 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; resize: vertical;"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!-- Section: Family Members -->
                            <div
                                style="background: #fff8f0; padding: 1rem 1.2rem; border-radius: 8px; margin-bottom: 1.2rem; border-left: 4px solid #f7971e;">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <h4 style="margin: 0; color: #b85c00; font-size: 0.95rem;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family
                                        Members</h4>
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <span style="font-size: 0.8rem; color: #666;">
                                            üë® Male: <strong id="autoMaleCount">0</strong> &nbsp;|&nbsp;
                                            üë© Female: <strong id="autoFemaleCount">0</strong> &nbsp;|&nbsp;
                                            Total: <strong id="autoTotalCount">0</strong>
                                        </span>
                                        <button type="button" onclick="addFamilyMemberRow()"
                                            style="background: #f7971e; color: white; border: none; padding: 6px 14px; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600;">
                                            ‚ûï Add Member
                                        </button>
                                    </div>
                                </div>

                                <!-- Family member table header -->
                                <div
                                    style="display: grid; grid-template-columns: 2fr 1.5fr 1fr 0.8fr 40px; gap: 0.5rem; padding: 6px 0; border-bottom: 2px solid #f0d9b5; margin-bottom: 0.5rem;">
                                    <span
                                        style="font-weight: 700; font-size: 0.78rem; color: #666; text-transform: uppercase;">Name</span>
                                    <span
                                        style="font-weight: 700; font-size: 0.78rem; color: #666; text-transform: uppercase;">Relation</span>
                                    <span
                                        style="font-weight: 700; font-size: 0.78rem; color: #666; text-transform: uppercase;">Gender</span>
                                    <span
                                        style="font-weight: 700; font-size: 0.78rem; color: #666; text-transform: uppercase;">Age</span>
                                    <span></span>
                                </div>

                                <!-- Dynamic rows container -->
                                <div id="familyMembersContainer">
                                    <!-- Rows added by JS -->
                                </div>

                                <input type="hidden" id="memberMale">
                                <input type="hidden" id="memberFemale">
                            </div>

                            <!-- Save / Cancel -->
                            <div style="display: flex; gap: 1rem; margin-top: 1rem;">
                                <button type="submit" class="btn primary"
                                    style="flex: 1; padding: 14px; font-size: 16px;">
                                    üíæ Save Member
                                </button>
                                <button type="button" onclick="closeMemberModal()" class="btn ghost"
                                    style="padding: 14px 24px;">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Match Candidate Modal -->
                <!-- <div id="matchModal" class="modal" style="display: none;">
                    <div class="modal-content"
                        style="max-width: 500px; background: white; padding: 2.5rem; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.15);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h3 style="margin: 0;">Mark as Matched</h3>
                            <button onclick="closeMatchModal()"
                                style="background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">&times;</button>
                        </div>
                        <form id="matchForm">
                            <input type="hidden" id="matchCandidateId">
                            <div style="margin-bottom: 1rem;">
                                <label
                                    style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">Partner
                                    Name *</label>
                                <input type="text" id="partnerName" required
                                    style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 15px;">
                            </div>
                            <div style="margin-bottom: 1rem;">
                                <label
                                    style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #333;">Partner
                                    Gender *</label>
                                <select id="partnerGender" required
                                    style="width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 15px;">
                                    <option value="">Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                            </div>
                            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                                <button type="submit" class="btn primary" style="flex: 1; padding: 12px;">Confirm
                                    Match</button>
                                <button type="button" onclick="closeMatchModal()" class="btn ghost"
                                    style="padding: 12px;">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>-->
            </section>


            <!-- ========= REVIEW SUBMISSIONS SECTION ========= -->
            <section id="reviewSection" class="admin-section" style="display:none;">
                <h3 class="section-title">üìã Review Google Form Submissions</h3>

                <!-- Google Sheet Configuration -->
                <div
                    style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 1.5rem; border-radius: 12px; border: 1px solid #dee2e6; margin-bottom: 2rem;">
                    <h4 style="margin: 0 0 1rem 0; color: #495057; font-size: 1rem;">‚öôÔ∏è Google Sheet Configuration</h4>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: flex-end;">
                        <div style="flex: 1; min-width: 300px;">
                            <label
                                style="display: block; margin-bottom: 0.4rem; font-weight: 600; font-size: 0.85rem; color: #555;">Google
                                Sheet ID</label>
                            <input type="text" id="googleSheetId"
                                placeholder="e.g. 1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgVE2upms"
                                style="width: 100%; padding: 10px 14px; border: 2px solid #ced4da; border-radius: 8px; font-size: 14px; font-family: monospace;">
                        </div>
                        <div style="min-width: 200px;">
                            <label
                                style="display: block; margin-bottom: 0.4rem; font-weight: 600; font-size: 0.85rem; color: #555;">Sheet
                                Name (tab)</label>
                            <input type="text" id="googleSheetTab" placeholder="Form Responses 1"
                                value="Form Responses 1"
                                style="width: 100%; padding: 10px 14px; border: 2px solid #ced4da; border-radius: 8px; font-size: 14px;">
                        </div>
                        <div style="display: flex; gap: 0.5rem;">
                            <button onclick="saveSheetConfig()" class="btn"
                                style="padding: 10px 20px; background: #6c757d; color: white; white-space: nowrap;">üíæ
                                Save Config</button>
                            <button onclick="fetchGoogleSheetSubmissions()" class="btn primary"
                                style="padding: 10px 20px; white-space: nowrap;">üîÑ Fetch Submissions</button>
                        </div>
                    </div>
                    <p style="margin: 0.8rem 0 0 0; font-size: 0.8rem; color: #888;">
                        üìå <strong>How to find Sheet ID:</strong> Open your Google Sheet ‚Üí copy the long ID from the
                        URL:<br>
                        <code
                            style="background: #fff; padding: 2px 6px; border-radius: 4px;">https://docs.google.com/spreadsheets/d/<strong style="color: #0a4a96;">{THIS_IS_THE_ID}</strong>/edit</code><br>
                        üìå Make sure the sheet is <strong>published to web</strong>: File ‚Üí Share ‚Üí Publish to web ‚Üí
                        Publish
                    </p>
                </div>

                <!-- Stats Bar -->
                <div id="reviewStats" style="display: none; margin-bottom: 1.5rem;">
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <div
                            style="flex: 1; min-width: 150px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 1.2rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; font-weight: 700;" id="statTotal">0</div>
                            <div style="font-size: 0.85rem; opacity: 0.9;">Total Submissions</div>
                        </div>
                        <div
                            style="flex: 1; min-width: 150px; background: linear-gradient(135deg, #f7971e, #ffd200); color: white; padding: 1.2rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; font-weight: 700;" id="statPending">0</div>
                            <div style="font-size: 0.85rem; opacity: 0.9;">Pending Review</div>
                        </div>
                        <div
                            style="flex: 1; min-width: 150px; background: linear-gradient(135deg, #11998e, #38ef7d); color: white; padding: 1.2rem; border-radius: 10px; text-align: center;">
                            <div style="font-size: 2rem; font-weight: 700;" id="statApproved">0</div>
                            <div style="font-size: 0.85rem; opacity: 0.9;">Already Approved</div>
                        </div>
                    </div>
                </div>

                <!-- Filter Tabs -->
                <div id="reviewFilterBar"
                    style="display: none; margin-bottom: 1.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="btn" onclick="filterSubmissions('all')" id="filterAll"
                        style="padding: 8px 18px; background: #0a4a96; color: white; font-size: 0.85rem;">All</button>
                    <button class="btn ghost" onclick="filterSubmissions('pending')" id="filterPending"
                        style="padding: 8px 18px; font-size: 0.85rem;">‚è≥ Pending</button>
                    <button class="btn ghost" onclick="filterSubmissions('approved')" id="filterApproved"
                        style="padding: 8px 18px; font-size: 0.85rem;">‚úÖ Approved</button>
                </div>

                <!-- Submissions List -->
                <div id="submissionsContainer">
                    <div style="text-align: center; padding: 4rem 2rem; color: #999;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìã</div>
                        <p style="font-size: 1.1rem; font-weight: 600;">No submissions loaded</p>
                        <p style="font-size: 0.9rem;">Configure your Google Sheet ID above and click "Fetch Submissions"
                        </p>
                    </div>
                </div>
            </section>

            <section id="postSection" class="admin-section panel-card" style="display:none;">
                <h3 class="section-title">Post Management</h3>

                <!-- Search & Actions Bar -->
                <div class="search-container" style="margin-bottom: 2rem;">
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
                        <input type="text" id="postSearchInput" placeholder="Search by Title"
                            style="flex: 1; min-width: 250px; padding: 12px 16px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 15px;">
                        <button onclick="searchPosts()" class="btn primary"
                            style="padding: 12px 24px; white-space: nowrap;">
                            üîç Search
                        </button>
                        <button onclick="clearPostSearch()" class="btn ghost"
                            style="padding: 12px 24px; white-space: nowrap;">
                            Clear
                        </button>
                    </div>
                </div>

                <div class="form-grid">

                    <!-- Post Form -->
                    <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 12px; border: 1px solid #e9ecef;">
                        <h4 id="postFormTitle" style="margin-top: 0; color: #0a4a96;">Add New Post</h4>
                        <form id="addPostForm">
                            <input type="hidden" id="postId">
                            <div class="form-group">
                                <label style="font-weight: 600; font-size: 0.9rem;">Title</label>
                                <input type="text" id="postTitle" placeholder="Post Title" required
                                    class="form-control">
                            </div>
                            <div class="form-group">
                                <label style="font-weight: 600; font-size: 0.9rem;">Content</label>
                                <textarea id="postContent" placeholder="Post Content" rows="6" required
                                    class="form-control"></textarea>
                            </div>
                            <div class="form-actions" style="display:flex; gap:10px; margin-top: 1rem;">
                                <button type="submit" id="savePostBtn" class="btn primary" style="flex: 1;">Save
                                    Post</button>
                                <button type="button" id="cancelPostEdit" class="btn ghost" style="display:none;"
                                    onclick="resetPostForm()">Cancel</button>
                            </div>
                        </form>
                    </div>

                    <!-- Post List -->
                    <div id="adminPostsList" style="overflow-x: auto;">
                        <table id="postsTable"
                            style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                            <thead style="background: #e7eef6; color: #333;">
                                <tr>
                                    <th style="padding: 12px; text-align: left;">Title</th>
                                    <th style="padding: 12px; text-align: left;">Content Preview</th>
                                    <th style="padding: 12px; text-align: right;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="postsTableBody">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Global Loader Overlay -->
    <div id="globalLoader" class="loader-overlay" style="display: none;">
        <div class="loader-spinner"></div>
        <p style="color: white; margin-top: 15px; font-weight: 600;">Processing...</p>
    </div>

    <script>
        function showSection(id) {
            document.querySelectorAll('.admin-section').forEach(sec => sec.style.display = 'none');
            document.getElementById(id).style.display = 'block';
        }
    </script>
    <script src="assets/js/main.js?v=2.1"></script>
    <script src="assets/js/config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="assets/js/admin.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

</body>

</html>